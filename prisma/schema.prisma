generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int        @id @default(autoincrement())
  name      String?    @unique
  mobile    String     @unique
  otp       Int?
  age       Int?
  dob       String?
  player    Player?
  userToken UserToken?
}

model UserToken {
  id     Int     @id @default(autoincrement())
  token  String?
  userId Int     @unique
  user   User    @relation(fields: [userId], references: [id])
}

model Player {
  id           Int      @id @default(autoincrement())
  bowlingStyle String?
  battingStyle String?
  imageUrl     String?
  wicketKeeper Boolean?
  allrounder   Boolean?
  match        Match?   @relation("createdByPlayer")
  userId       Int      @unique
  user         User     @relation(fields: [userId], references: [id])
  statsId      Int      @unique
  stats        Stats    @relation(fields: [statsId], references: [id])
  matches      Match[]
  teams        Team[]   @relation("TeamPlayers")
  // Scoring      Scoring? @relation(fields: [scoringId], references: [id])
  // scoringId    Int?
  // Scoring      Scoring? @relation(fields: [scoringId], references: [id])
  // scoringId    Int?
}

model Stats {
  id           Int           @id @default(autoincrement())
  matches      Int           @default(0)
  player       Player?
  bowlStatsId  Int           @unique
  bowlingStats BowlingStats  @relation(fields: [bowlStatsId], references: [id])
  fieldStatsId Int           @unique
  fieldStats   FieldingStats @relation(fields: [fieldStatsId], references: [id])
  batStatsId   Int           @unique
  batStats     BattingStats  @relation(fields: [batStatsId], references: [id])
}

model BowlingStats {
  id         Int     @id @default(autoincrement())
  stats      Stats?
  matches    Int     @default(0)
  innings    Int     @default(0)
  wickets    Int     @default(0)
  totalBowls Int     @default(0)
  noBalls    Int     @default(0)
  wides      Int     @default(0)
  three_for  Int     @default(0)
  fifer      Int     @default(0)
  best       String?
}

model BattingStats {
  id          Int     @id @default(autoincrement())
  stats       Stats?
  matches     Int     @default(0)
  innings     Int     @default(0)
  ballsPlayed Int     @default(0)
  runs        Int     @default(0)
  notOuts     Int     @default(0)
  average     Decimal @default(0)
  strikeRate  Decimal @default(0)
  sixes       Int     @default(0)
  fours       Int     @default(0)
  ones        Int     @default(0)
  twos        Int     @default(0)
  threes      Int     @default(0)
}

model FieldingStats {
  id          Int    @id @default(autoincrement())
  stats       Stats?
  catches     Int    @default(0)
  mostCatches Int    @default(0)
  runOuts     Int    @default(0)
  mostRunOuts Int    @default(0)
  stump       Int    @default(0)
}

model Team {
  id           Int          @id @default(autoincrement())
  name         String?      @unique
  imageUrl     String?
  matches      Match[]
  totalMatches Int          @default(0)
  wins         Int          @default(0)
  losses       Int          @default(0)
  draws        Int          @default(0)
  players      Player[]     @relation("TeamPlayers")
  tournaments  Tournament[]
}

model Match {
  id           Int      @id @default(autoincrement())
  state        String
  ground       String
  date         DateTime
  ballType     String
  bowlingLimit Int
  overs        Int
  createdById  Int      @unique
  player       Player   @relation("createdByPlayer", fields: [createdById], references: [id])
  players      Player[]
  teams        Team[]
}

model Scoring {
  id Int @id @default(autoincrement())
  // Team1_players Player[] @relation("Team1Players")
  // Team2_players Player[] @relation("Team2Players")
}

model Tournament {
  id    Int    @id @default(autoincrement())
  teams Team[]
}
